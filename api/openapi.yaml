openapi: 3.0.0
info:
  version: 0.0.1
  title: Keycard API
  description: Keycard API for managing zones and their resources.
servers:
  - url: /
paths:
  /organizations:
    get:
      operationId: listOrganizations
      description: Returns a list of organizations for the authenticated organization
      parameters:
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
      responses:
        '200':
          description: Default response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Organization'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
  /organizations/{organization_id}/aws/key-policy:
    get:
      operationId: getOrganizationKMSKeyPolicy
      description: Returns an KMS key policy for use with customer-managed keys
      parameters:
        - name: organization_id
          in: path
          required: true
          description: Organization ID or label
          schema:
            $ref: '#/components/schemas/OrganizationIdOrLabel'
      responses:
        '200':
          description: Valid encryption key policy statements
          content:
            application/json:
              schema:
                type: object
                properties:
                  policy:
                    type: string
                    description: JSON-encoded policy that can be used in AWS KMS key policies
                required:
                  - policy
  /zones:
    get:
      operationId: listZones
      summary: List zones
      description: Returns a list of zones for the authenticated organization
      parameters:
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Zone'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Zones
    post:
      operationId: createZone
      summary: Create zone
      description: Creates a new zone for the authenticated organization. A zone is an isolated environment for IAM resources.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ZoneCreate'
      responses:
        '200':
          description: A zone for organizing resources within an organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Zone'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Zones
  '/zones/{id}':
    get:
      operationId: getZone
      summary: Get zone
      description: Returns details of a specific zone by ID
      parameters:
        - name: id
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A zone for organizing resources within an organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Zone'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Zones
    patch:
      operationId: updateZone
      summary: Update zone
      description: Updates a zone's configuration (partial update)
      parameters:
        - name: id
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ZoneUpdate'
      responses:
        '200':
          description: A zone for organizing resources within an organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Zone'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Zones
    delete:
      operationId: deleteZone
      summary: Delete zone
      description: Permanently deletes a zone and all its associated resources
      parameters:
        - name: id
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Zones
  '/zones/{zoneId}/applications':
    get:
      operationId: listApplications
      summary: List applications
      description: Returns a list of applications in the specified zone
      parameters:
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: identifier
          in: query
          required: false
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Application'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
    post:
      operationId: createApplication
      summary: Create application
      description: Creates a new Application - a software system with an identity that can access Resources
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationCreate'
      responses:
        '200':
          description: An Application is a software system with an associated identity that can access Resources. It may act on its own behalf (machine-to-machine) or on behalf of a user (delegated access).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/applications/{id}':
    get:
      operationId: getApplication
      summary: Get application
      description: Returns details of a specific Application by ID
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: An Application is a software system with an associated identity that can access Resources. It may act on its own behalf (machine-to-machine) or on behalf of a user (delegated access).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
    patch:
      operationId: updateApplication
      summary: Update application
      description: Updates an Application's configuration and metadata
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationUpdate'
      responses:
        '200':
          description: An Application is a software system with an associated identity that can access Resources. It may act on its own behalf (machine-to-machine) or on behalf of a user (delegated access).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Application'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
    delete:
      operationId: deleteApplication
      summary: Delete application
      description: Permanently deletes an application
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/applications/{id}/dependencies':
    get:
      operationId: listApplicationDependencies
      summary: List application dependencies
      description: Returns resource dependencies for an application
      parameters:
        - name: when_accessing
          in: query
          required: false
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Resource'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/applications/{id}/dependencies/{dependencyId}':
    put:
      operationId: addApplicationDependency
      summary: Add application dependency
      description: Adds a resource dependency to an application
      parameters:
        - name: when_accessing
          in: query
          required: false
          schema:
            type: array
            items:
              type: string
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: dependencyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
    delete:
      operationId: removeApplicationDependency
      summary: Remove application dependency
      description: Removes a resource dependency from an application
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: dependencyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
    get:
      operationId: getApplicationDependency
      summary: Get application dependency
      description: Retrieves a specific resource dependency of an application
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: dependencyId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'A Resource is a system that exposes protected information or functionality. It requires authentication of the requesting actor, which may be a user or application, before allowing access.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/applications/{id}/application-credentials':
    get:
      operationId: listApplicationCredentialsForApplication
      summary: List application credentials
      description: Returns a list of application credentials for a specific application
      parameters:
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApplicationCredential'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/applications/{id}/resources':
    get:
      operationId: listApplicationResources
      summary: List application resources
      description: Returns a list of resources provided by an application
      parameters:
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Resource'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Applications
  '/zones/{zoneId}/application-credentials':
    get:
      operationId: listApplicationCredentials
      summary: List application credentials
      description: Returns a list of application credentials in the specified zone
      parameters:
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: applicationId
          in: query
          required: false
          schema:
            type: string
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApplicationCredential'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Application Credentials
    post:
      operationId: createApplicationCredential
      summary: Create application credential
      description: Creates a new application credential
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationCredentialCreate'
      responses:
        '200':
          description: Response for creating a new application credential
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationCredentialCreateResponse'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Application Credentials
  '/zones/{zoneId}/application-credentials/{id}':
    get:
      operationId: getApplicationCredential
      summary: Get application credential
      description: Returns details of a specific application credential by ID
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Credentials for accessing external services from applications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationCredential'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Application Credentials
    patch:
      operationId: updateApplicationCredential
      summary: Update application credential
      description: Updates an application credential's configuration
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApplicationCredentialUpdate'
      responses:
        '200':
          description: Credentials for accessing external services from applications
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplicationCredential'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Application Credentials
    delete:
      operationId: deleteApplicationCredential
      summary: Delete application credential
      description: Permanently deletes an application credential
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Application Credentials
  '/zones/{zoneId}/providers':
    get:
      operationId: listProviders
      summary: List providers
      description: Returns a list of providers in the specified zone
      parameters:
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: identifier
          in: query
          required: false
          schema:
            type: string
        - name: type
          in: query
          required: false
          schema:
            type: string
            enum:
              - external
              - keycard-vault
              - keycard-sts
        - name: cursor
          in: query
          required: false
          schema:
            type: string
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            default: 100
            maximum: 1000
            minimum: 1
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Provider'
                  page_info:
                    $ref: '#/components/schemas/PageInfo'
                required:
                  - items
                  - page_info
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Providers
    post:
      operationId: createProvider
      summary: Create provider
      description: Creates a new Provider - a system that supplies access to Resources and allows actors to authenticate
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProviderCreate'
      responses:
        '200':
          description: A Provider is a system that supplies access to Resources and allows actors (Users or Applications) to authenticate.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Providers
  '/zones/{zoneId}/providers/{id}':
    get:
      operationId: getProvider
      summary: Get provider
      description: Returns details of a specific Provider by ID
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: A Provider is a system that supplies access to Resources and allows actors (Users or Applications) to authenticate.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Providers
    patch:
      operationId: updateProvider
      summary: Update provider
      description: Updates a Provider's configuration and metadata
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProviderUpdate'
      responses:
        '200':
          description: A Provider is a system that supplies access to Resources and allows actors (Users or Applications) to authenticate.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Providers
    delete:
      operationId: deleteProvider
      summary: Delete provider
      description: Permanently deletes a provider
      parameters:
        - name: zoneId
          in: path
          required: true
          schema:
            type: string
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Providers
  '/zones/{zoneId}/resources':
    get:
      operationId: listResources
      summary: List resources
      description: Returns a list of resources in the specified zone
      parameters:
        - name: identifier
          in: query
          description: Filter resources by identifier
          required: false
          schema:
            type: string
        - name: credentialProviderId
          in: query
          description: Filter resources by credential provider ID
          required: false
          schema:
            type: string
        - name: slug
          in: query
          required: false
          schema:
            type: string
        - name: zoneId
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  items:
                    type: array
                    items:
                      $ref: '#/components/schemas/Resource'
                required:
                  - items
        '400':
          description: Default Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                required:
                  - message
      security:
        - bearerAuth: []
      tags:
        - Resources
    post:
      operationId: createResource
      summary: Create resource
      description: Creates a new Resource - a system that exposes protected information or functionality requiring authentication
      parameters:
        - name: zoneId
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResourceCreate'
      responses:
        '200':
          description: 'A Resource is a system that exposes protected information or functionality. It requires authentication of the requesting actor, which may be a user or application, before allowing access.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Resources
  '/zones/{zoneId}/resources/{id}':
    get:
      operationId: getResource
      summary: Get resource
      description: Returns details of a specific Resource by ID
      parameters:
        - name: zoneId
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
        - name: id
          in: path
          description: Resource ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'A Resource is a system that exposes protected information or functionality. It requires authentication of the requesting actor, which may be a user or application, before allowing access.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Resources
    patch:
      operationId: updateResource
      summary: Update resource
      description: Updates a Resource's configuration and metadata
      parameters:
        - name: zoneId
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
        - name: id
          in: path
          description: Resource ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResourceUpdate'
      responses:
        '200':
          description: 'A Resource is a system that exposes protected information or functionality. It requires authentication of the requesting actor, which may be a user or application, before allowing access.'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Resource'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Resources
    delete:
      operationId: deleteResource
      summary: Delete resource
      description: Permanently deletes a Resource
      parameters:
        - name: zoneId
          in: path
          description: Zone ID
          required: true
          schema:
            type: string
        - name: id
          in: path
          description: Resource ID
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Default Response
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - Resources
  '/organizations/{organization_id}/sso-connection':
    post:
      operationId: enableSSOConnection
      summary: Enable SSO connection
      description: Enable SSO for organization
      parameters:
        - name: organization_id
          in: path
          required: true
          description: Organization ID or label
          schema:
            $ref: '#/components/schemas/OrganizationIdOrLabel'
      requestBody:
        description: SSO connection configuration
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SSOConnectionCreate'
      responses:
        '201':
          description: SSO connection created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SSOConnection'
        '409':
          description: SSO is already enabled for this organization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - SSO
    get:
      operationId: getSSOConnection
      summary: Get SSO connection
      description: Get SSO connection configuration for organization
      parameters:
        - name: organization_id
          in: path
          required: true
          description: Organization ID or label
          schema:
            $ref: '#/components/schemas/OrganizationIdOrLabel'
      responses:
        '200':
          description: SSO connection details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SSOConnection'
        '404':
          description: Organization not found or SSO not enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - SSO
    patch:
      operationId: updateSSOConnection
      summary: Update SSO connection
      description: Update SSO connection configuration
      parameters:
        - name: organization_id
          in: path
          required: true
          description: Organization ID or label
          schema:
            $ref: '#/components/schemas/OrganizationIdOrLabel'
      requestBody:
        description: SSO connection update details
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SSOConnectionUpdate'
      responses:
        '200':
          description: SSO connection updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SSOConnection'
        '404':
          description: Organization not found or SSO not enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - SSO
    delete:
      operationId: disableSSOConnection
      summary: Disable SSO connection
      description: Disable SSO for organization
      parameters:
        - name: organization_id
          in: path
          required: true
          description: Organization ID or label
          schema:
            $ref: '#/components/schemas/OrganizationIdOrLabel'
      responses:
        '204':
          description: SSO connection disabled successfully
        '404':
          description: Organization not found or SSO not enabled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      security:
        - bearerAuth: []
      tags:
        - SSO
components:
  schemas:
    PageInfo:
      description: Pagination information
      type: object
      properties:
        has_next_page:
          description: Whether there are more items after the current page
          type: boolean
        has_previous_page:
          description: Whether there are items before the current page
          type: boolean
        start_cursor:
          description: Cursor pointing to the first item in the current page
          type: string
          nullable: true
        end_cursor:
          description: Cursor pointing to the last item in the current page
          type: string
          nullable: true
      additionalProperties: false
      required:
        - has_next_page
        - has_previous_page
      title: Page Info
    Metadata:
      description: Entity metadata
      type: object
      properties:
        docs_url:
          description: Documentation URL
          type: string
          format: uri
          maxLength: 2048
      additionalProperties: false
    MetadataUpdate:
      description: 'Entity metadata (set to null or {} to remove metadata)'
      type: object
      properties:
        docs_url:
          description: Documentation URL (set to null to unset)
          type: string
          format: uri
          maxLength: 2048
          nullable: true
      additionalProperties: false
      nullable: true
    ZoneOAuth2Protocol:
      description: OAuth 2.0 protocol configuration for a zone
      type: object
      properties:
        issuer:
          description: OAuth 2.0 issuer identifier
          type: string
          format: uri
        authorization_server_metadata:
          description: OAuth 2.0 Authorization Server Metadata endpoint (.well-known/oauth-authorization-server)
          type: string
          format: uri
        authorization_endpoint:
          description: OAuth 2.0 authorization endpoint
          type: string
          format: uri
        token_endpoint:
          description: OAuth 2.0 token endpoint
          type: string
          format: uri
        redirect_uri:
          description: OAuth 2.0 redirect URI for this zone
          type: string
          format: uri
        registration_endpoint:
          description: OAuth 2.0 Dynamic Client Registration endpoint
          type: string
          format: uri
        jwks_uri:
          description: JSON Web Key Set endpoint
          type: string
          format: uri
        pkce_required:
          description: Whether PKCE is required for authorization code flows
          type: boolean
        dcr_enabled:
          description: Whether Dynamic Client Registration is enabled
          type: boolean
      required:
        - issuer
        - authorization_server_metadata
        - authorization_endpoint
        - token_endpoint
        - redirect_uri
        - registration_endpoint
        - jwks_uri
        - pkce_required
        - dcr_enabled
      title: Zone OAuth 2.0 Protocol
    ZoneOpenIDProtocol:
      description: OpenID Connect protocol configuration for a zone
      type: object
      properties:
        provider_configuration:
          description: OpenID Connect Provider Configuration endpoint (.well-known/openid-configuration)
          type: string
          format: uri
        userinfo_endpoint:
          description: OpenID Connect UserInfo endpoint
          type: string
          format: uri
      required:
        - provider_configuration
        - userinfo_endpoint
      title: Zone OpenID Connect Protocol
    ZoneOAuth2ProtocolCreate:
      description: OAuth 2.0 protocol configuration for zone creation
      type: object
      properties:
        pkce_required:
          description: Whether PKCE is required for authorization code flows
          type: boolean
          default: true
        dcr_enabled:
          description: Whether Dynamic Client Registration is enabled
          type: boolean
          default: true
      title: Zone OAuth 2.0 Protocol Create
    ZoneProtocolCreate:
      description: Protocol configuration for zone creation
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ZoneOAuth2ProtocolCreate'
      title: Zone Protocol Create
    ZoneOAuth2ProtocolUpdate:
      description: OAuth 2.0 protocol configuration update for a zone (partial update)
      type: object
      properties:
        pkce_required:
          description: Whether PKCE is required for authorization code flows
          type: boolean
          nullable: true
        dcr_enabled:
          description: Whether Dynamic Client Registration is enabled
          type: boolean
          nullable: true
      title: Zone OAuth 2.0 Protocol Update
    ZoneProtocolUpdate:
      description: Protocol configuration update for a zone (partial update)
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ZoneOAuth2ProtocolUpdate'
      nullable: true
      title: Zone Protocol Update
    EncryptionKeyAwsKmsConfig:
      description: 'AWS KMS configuration for zone encryption. When not specified, the default Keycard Cloud encryption key will be used.'
      type: object
      properties:
        type:
          type: string
          enum:
            - aws
        arn:
          description: AWS KMS Key ARN for encrypting the zone's data
          type: string
          minLength: 1
      required:
        - type
        - arn
      title: AWS KMS Encryption Key Configuration
    EncryptionKeyAwsKmsConfigUpdate:
      description: AWS KMS configuration for zone encryption update (set to null to remove customer-managed key and revert to default)
      type: object
      properties:
        type:
          type: string
          enum:
            - aws
        arn:
          description: AWS KMS Key ARN for encrypting the zone's data
          type: string
          minLength: 1
      nullable: true
      required:
        - type
        - arn
      title: AWS KMS Encryption Key Configuration Update
    ProviderOAuth2Protocol:
      description: OAuth 2.0 protocol configuration
      type: object
      properties:
        authorization_endpoint:
          type: string
          format: uri
          nullable: true
        token_endpoint:
          type: string
          format: uri
          nullable: true
        registration_endpoint:
          type: string
          format: uri
          nullable: true
        jwks_uri:
          type: string
          format: uri
          nullable: true
        code_challenge_methods_supported:
          type: array
          items:
            type: string
          nullable: true
        scopes_supported:
          type: array
          items:
            type: string
          nullable: true
      nullable: true
      title: Provider OAuth 2.0 Protocol
    ProviderOpenIDProtocol:
      description: OpenID Connect protocol configuration
      type: object
      properties:
        userinfo_endpoint:
          type: string
          format: uri
          nullable: true
      nullable: true
      title: Provider OpenID Connect Protocol
    ProviderOAuth2ProtocolCreate:
      description: OAuth 2.0 protocol configuration for provider creation
      type: object
      properties:
        authorization_endpoint:
          type: string
          format: uri
        token_endpoint:
          type: string
          format: uri
        registration_endpoint:
          type: string
          format: uri
        jwks_uri:
          type: string
          format: uri
        code_challenge_methods_supported:
          type: array
          items:
            type: string
        scopes_supported:
          type: array
          items:
            type: string
      title: Provider OAuth 2.0 Protocol Create
    ProviderOpenIDProtocolCreate:
      description: OpenID Connect protocol configuration for provider creation
      type: object
      properties:
        userinfo_endpoint:
          type: string
          format: uri
      title: Provider OpenID Connect Protocol Create
    ProviderProtocolCreate:
      description: Protocol-specific configuration for provider creation
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ProviderOAuth2ProtocolCreate'
        openid:
          $ref: '#/components/schemas/ProviderOpenIDProtocolCreate'
      title: Provider Protocol Create
    ProviderOAuth2ProtocolUpdate:
      description: OAuth 2.0 protocol configuration. Set to null to remove all OAuth2 config.
      type: object
      properties:
        authorization_endpoint:
          type: string
          format: uri
          nullable: true
        token_endpoint:
          type: string
          format: uri
          nullable: true
        registration_endpoint:
          type: string
          format: uri
          nullable: true
        jwks_uri:
          type: string
          format: uri
          nullable: true
        code_challenge_methods_supported:
          type: array
          items:
            type: string
          nullable: true
        scopes_supported:
          type: array
          items:
            type: string
          nullable: true
      nullable: true
      title: Provider OAuth 2.0 Protocol Update
    ProviderOpenIDProtocolUpdate:
      description: OpenID Connect protocol configuration. Set to null to remove all OpenID config.
      type: object
      properties:
        userinfo_endpoint:
          type: string
          format: uri
          nullable: true
      nullable: true
      title: Provider OpenID Connect Protocol Update
    ProviderProtocolUpdate:
      description: Protocol-specific configuration. Set to null to remove all protocols.
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ProviderOAuth2ProtocolUpdate'
        openid:
          $ref: '#/components/schemas/ProviderOpenIDProtocolUpdate'
      nullable: true
      title: Provider Protocol Update
    ApplicationOAuth2Protocol:
      description: OAuth 2.0 protocol configuration
      type: object
      properties:
        redirect_uris:
          description: OAuth 2.0 redirect URIs for this application
          type: array
          items:
            format: uri
            type: string
          nullable: true
      additionalProperties: false
      nullable: true
      title: Application OAuth 2.0 Protocol
    ApplicationOAuth2ProtocolCreate:
      description: OAuth 2.0 protocol configuration for application creation
      type: object
      properties:
        redirect_uris:
          description: OAuth 2.0 redirect URIs for this application
          type: array
          items:
            format: uri
            type: string
      additionalProperties: false
      title: Application OAuth 2.0 Protocol Create
    ApplicationProtocolCreate:
      description: Protocol-specific configuration for application creation
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ApplicationOAuth2ProtocolCreate'
      additionalProperties: false
      title: Application Protocol Create
    ApplicationOAuth2ProtocolUpdate:
      description: OAuth 2.0 protocol configuration for application update
      type: object
      properties:
        redirect_uris:
          description: 'OAuth 2.0 redirect URIs for this application (set to null or [] to unset)'
          type: array
          items:
            format: uri
            type: string
          nullable: true
      additionalProperties: false
      nullable: true
      title: Application OAuth 2.0 Protocol Update
    ApplicationProtocolUpdate:
      description: Protocol-specific configuration for application update
      type: object
      properties:
        oauth2:
          $ref: '#/components/schemas/ApplicationOAuth2ProtocolUpdate'
      additionalProperties: false
      nullable: true
      title: Application Protocol Update
    ApplicationCredentialCreateToken:
      description: Schema for creating a token application credential
      type: object
      properties:
        application_id:
          description: ID of the application this credential belongs to
          type: string
        type:
          type: string
          enum:
            - token
        provider_id:
          description: ID of the provider issuing tokens this credential verifies
          type: string
        subject:
          description: 'Subject identifier for the token. When omitted, any token from the provider is accepted without checking application-specific claims.'
          type: string
      required:
        - application_id
        - type
        - provider_id
      title: Application Credential Create Token
    ApplicationCredentialCreatePassword:
      description: Schema for creating a password application credential
      type: object
      properties:
        application_id:
          description: ID of the application this credential belongs to
          type: string
        type:
          type: string
          enum:
            - password
        identifier:
          description: 'Username for password credential, also used as OAuth 2.0 client ID (auto-generated if not provided)'
          type: string
      required:
        - application_id
        - type
      title: Application Credential Create Password
    ApplicationCredentialCreatePublicKey:
      description: Schema for creating a public key application credential
      type: object
      properties:
        application_id:
          description: ID of the application this credential belongs to
          type: string
        type:
          type: string
          enum:
            - public-key
        jwks_uri:
          description: JWKS URI to retrieve public keys from
          type: string
          format: uri
        identifier:
          description: 'Client ID for public key credential, also used as OAuth 2.0 client ID (auto-generated if not provided)'
          type: string
      required:
        - application_id
        - type
        - jwks_uri
      title: Application Credential Create Public Key
    ApplicationCredentialCreateUrl:
      description: Schema for creating a URL application credential
      type: object
      properties:
        application_id:
          description: ID of the application this credential belongs to
          type: string
        type:
          type: string
          enum:
            - url
        identifier:
          description: URL of the credential (must be a valid URL)
          type: string
          format: uri
      required:
        - application_id
        - type
        - identifier
      title: Application Credential Create URL
    ApplicationCredentialCreatePublic:
      description: Schema for creating a public application credential
      type: object
      properties:
        application_id:
          description: ID of the application this credential belongs to
          type: string
        type:
          type: string
          enum:
            - public
        identifier:
          description: 'Identifier for public credential, also used as OAuth 2.0 client ID (auto-generated if not provided)'
          type: string
      required:
        - application_id
        - type
      title: Application Credential Create Public
    Error:
      description: Error response
      type: object
      properties:
        message:
          type: string
        code:
          type: string
        status:
          type: number
      required:
        - message
        - code
        - status
      title: Error
    Provider:
      description: A Provider is a system that supplies access to Resources and allows actors (Users or Applications) to authenticate.
      type: object
      properties:
        id:
          description: Unique identifier of the provider
          type: string
        organization_id:
          description: Organization that owns this provider
          type: string
        zone_id:
          description: Zone this provider belongs to
          type: string
        slug:
          description: 'URL-safe identifier, unique within the zone'
          type: string
          maxLength: 63
          minLength: 1
          pattern: '^[a-z0-9]+(?:-[a-z0-9]+)*$'
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        type:
          type: string
          enum:
            - external
            - keycard-vault
            - keycard-sts
        client_id:
          description: OAuth 2.0 client identifier
          type: string
          nullable: true
        client_secret_set:
          description: Indicates whether a client secret is configured
          type: boolean
        protocols:
          description: Protocol-specific configuration
          type: object
          nullable: true
          properties:
            oauth2:
              $ref: '#/components/schemas/ProviderOAuth2Protocol'
            openid:
              $ref: '#/components/schemas/ProviderOpenIDProtocol'
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - organization_id
        - zone_id
        - slug
        - name
        - identifier
        - created_at
        - updated_at
      title: Provider
    ProviderCreate:
      description: Schema for creating a new provider
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        client_id:
          description: OAuth 2.0 client identifier
          type: string
        client_secret:
          description: OAuth 2.0 client secret (will be encrypted and stored securely)
          type: string
        protocols:
          $ref: '#/components/schemas/ProviderProtocolCreate'
      required:
        - name
        - identifier
      title: Provider Create
    ProviderUpdate:
      description: Schema for updating an existing provider
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        client_id:
          description: OAuth 2.0 client identifier. Set to null to remove.
          type: string
          nullable: true
        client_secret:
          description: OAuth 2.0 client secret (will be encrypted and stored securely). Set to null to remove.
          type: string
          nullable: true
        protocols:
          $ref: '#/components/schemas/ProviderProtocolUpdate'
      title: Provider Update
    Resource:
      description: 'A Resource is a system that exposes protected information or functionality. It requires authentication of the requesting actor, which may be a user or application, before allowing access.'
      type: object
      properties:
        id:
          description: Unique identifier of the resource
          type: string
        organization_id:
          description: Organization that owns this resource
          type: string
        zone_id:
          description: Zone this resource belongs to
          type: string
        slug:
          description: 'URL-safe identifier, unique within the zone'
          type: string
          maxLength: 63
          minLength: 1
          pattern: '^[a-z0-9]+(?:-[a-z0-9]+)*$'
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        scopes:
          description: Scopes supported by the resource
          type: array
          items:
            type: string
          nullable: true
        credential_provider_id:
          description: ID of the credential provider for this resource
          type: string
        credential_provider:
          description: 'Deprecated: Nested provider object. Use credential_provider_id to fetch provider separately. When this resource appears nested in another API response, this field will be undefined.'
          allOf:
            - $ref: '#/components/schemas/Provider'
          deprecated: true
        application_id:
          description: ID of the application that provides this resource
          type: string
        application:
          description: 'Deprecated: Nested application object. Use application_id to fetch application separately. When this resource appears nested in another API response, this field will be undefined.'
          allOf:
            - $ref: '#/components/schemas/Application'
          deprecated: true
        when_accessing:
          description: 'List of resource IDs that, when accessed, make this dependency available. Only present when this resource is returned as a dependency.'
          type: array
          items:
            type: string
        metadata:
          $ref: '#/components/schemas/Metadata'
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - organization_id
        - zone_id
        - slug
        - identifier
        - name
        - created_at
        - updated_at
      title: Resource
    ResourceCreate:
      description: Schema for creating a new resource
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        scopes:
          description: Scopes supported by the resource
          type: array
          items:
            type: string
        credential_provider_id:
          description: ID of the credential provider to associate with the resource
          type: string
        application_id:
          description: ID of the application that provides this resource
          type: string
        metadata:
          $ref: '#/components/schemas/Metadata'
      required:
        - name
        - identifier
      title: Resource Create
    ResourceUpdate:
      description: |-
        Schema for updating an existing resource (partial update).

        **Warning:** Changing the `identifier` field may break existing integrations and dependencies.
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        scopes:
          description: Scopes supported by the resource (set to null to unset)
          type: array
          items:
            minLength: 1
            type: string
          nullable: true
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        credential_provider_id:
          description: ID of the credential provider to associate with the resource (set to null to unset)
          type: string
          nullable: true
        application_id:
          description: ID of the application that provides this resource (set to null to unset)
          type: string
          nullable: true
        metadata:
          $ref: '#/components/schemas/MetadataUpdate'
      title: Resource Update
    Application:
      description: An Application is a software system with an associated identity that can access Resources. It may act on its own behalf (machine-to-machine) or on behalf of a user (delegated access).
      type: object
      properties:
        id:
          description: Unique identifier of the application
          type: string
        organization_id:
          description: Organization that owns this application
          type: string
        zone_id:
          description: Zone this application belongs to
          type: string
        slug:
          description: 'URL-safe identifier, unique within the zone'
          type: string
          maxLength: 63
          minLength: 1
          pattern: '^[a-z0-9]+(?:-[a-z0-9]+)*$'
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        metadata:
          $ref: '#/components/schemas/Metadata'
        protocols:
          description: Protocol-specific configuration
          type: object
          additionalProperties: false
          nullable: true
          properties:
            oauth2:
              $ref: '#/components/schemas/ApplicationOAuth2Protocol'
        dependencies_count:
          description: Number of resource dependencies
          type: integer
        traits:
          description: Traits of the application
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/ApplicationTrait'
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - organization_id
        - zone_id
        - slug
        - identifier
        - name
        - dependencies_count
        - created_at
        - updated_at
      title: Application
    ApplicationTrait:
      description: Traits ascribe behaviors and characteristics to an application, which may activate trait-specific user experiences, workflows, or other system behaviors
      type: string
      enum:
        - gateway
      title: Application Trait
    ApplicationCreate:
      description: Schema for creating a new application
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        dependencies:
          description: Dependencies of the application
          type: array
          items:
            type: object
            properties:
              id:
                description: Resource identifier
                type: string
              type:
                type: string
            required:
              - id
        metadata:
          $ref: '#/components/schemas/Metadata'
        protocols:
          $ref: '#/components/schemas/ApplicationProtocolCreate'
        traits:
          description: Traits of the application
          type: array
          items:
            $ref: '#/components/schemas/ApplicationTrait'
      required:
        - name
        - identifier
      title: Application Create
    ApplicationUpdate:
      description: Schema for updating an existing application
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        identifier:
          description: 'User specified identifier, unique within the zone'
          type: string
          maxLength: 2048
          minLength: 1
        metadata:
          $ref: '#/components/schemas/MetadataUpdate'
        protocols:
          $ref: '#/components/schemas/ApplicationProtocolUpdate'
        traits:
          description: Traits of the application
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/ApplicationTrait'
      title: Application Update
    ApplicationCredentialBaseFields:
      description: Common fields shared by all application credential types
      type: object
      properties:
        id:
          description: Unique identifier of the credential
          type: string
        organization_id:
          description: Organization that owns this credential
          type: string
        zone_id:
          description: Zone this credential belongs to
          type: string
        slug:
          description: 'URL-safe identifier, unique within the zone'
          type: string
          maxLength: 63
          minLength: 1
          pattern: '^[a-z0-9]+(?:-[a-z0-9]+)*$'
        application_id:
          description: ID of the application this credential belongs to
          type: string
        application:
          description: 'Deprecated: Nested application object. Use application_id to fetch application separately. When this credential appears nested in another API response, this field will be undefined.'
          $ref: '#/components/schemas/Application'
          deprecated: true
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - organization_id
        - zone_id
        - slug
        - application_id
        - created_at
        - updated_at
      title: Application Credential Base Fields
    ApplicationCredentialToken:
      description: Token-based application credential
      allOf:
        - $ref: '#/components/schemas/ApplicationCredentialBaseFields'
        - type: object
          properties:
            type:
              type: string
              enum:
                - token
            provider_id:
              description: ID of the provider issuing tokens verified by this credential
              type: string
            provider:
              description: 'Deprecated: Nested provider object. Use provider_id to fetch provider separately. When this credential appears nested in another API response, this field will be undefined.'
              $ref: '#/components/schemas/Provider'
              deprecated: true
            identifier:
              description: 'Identifier for this credential. For token type, this equals the subject value, or ''*'' when subject is not specified.'
              type: string
            subject:
              description: 'Subject identifier for the token. When null or omitted, any token from the provider is accepted without checking application-specific claims.'
              type: string
              nullable: true
          required:
            - type
            - provider_id
            - identifier
      title: Application Credential Token
    ApplicationCredentialPassword:
      description: Password-based application credential
      allOf:
        - $ref: '#/components/schemas/ApplicationCredentialBaseFields'
        - type: object
          properties:
            type:
              type: string
              enum:
                - password
            identifier:
              description: 'Username for password credential, also used as OAuth 2.0 client ID'
              type: string
            password:
              description: 'Password for credential (only returned on creation, store securely), also used as OAuth 2.0 client secret'
              type: string
          required:
            - type
            - identifier
      title: Application Credential Password
    ApplicationCredentialPublicKey:
      description: Public key-based application credential
      allOf:
        - $ref: '#/components/schemas/ApplicationCredentialBaseFields'
        - type: object
          properties:
            type:
              type: string
              enum:
                - public-key
            identifier:
              description: 'Client ID for public key credential, also used as OAuth 2.0 client ID'
              type: string
            jwks_uri:
              description: JWKS URI to retrieve public keys from
              type: string
              format: uri
          required:
            - type
            - identifier
            - jwks_uri
      title: Application Credential Public Key
    ApplicationCredentialUrl:
      description: URL-based application credential
      allOf:
        - $ref: '#/components/schemas/ApplicationCredentialBaseFields'
        - type: object
          properties:
            type:
              type: string
              enum:
                - url
            identifier:
              description: URL of the credential (must be a valid URL)
              type: string
              format: uri
          required:
            - type
            - identifier
      title: Application Credential URL
    ApplicationCredentialPublic:
      description: Public credential (no secret storage)
      allOf:
        - $ref: '#/components/schemas/ApplicationCredentialBaseFields'
        - type: object
          properties:
            type:
              type: string
              enum:
                - public
            identifier:
              description: 'Identifier for public credential, also used as OAuth 2.0 client ID'
              type: string
          required:
            - type
            - identifier
      title: Application Credential Public
    ApplicationCredential:
      description: Credentials for accessing external services from applications
      anyOf:
        - $ref: '#/components/schemas/ApplicationCredentialToken'
        - $ref: '#/components/schemas/ApplicationCredentialPassword'
        - $ref: '#/components/schemas/ApplicationCredentialPublicKey'
        - $ref: '#/components/schemas/ApplicationCredentialUrl'
        - $ref: '#/components/schemas/ApplicationCredentialPublic'
      title: Application Credential
    ApplicationCredentialCreate:
      description: Schema for creating a new application credential
      anyOf:
        - $ref: '#/components/schemas/ApplicationCredentialCreateToken'
        - $ref: '#/components/schemas/ApplicationCredentialCreatePassword'
        - $ref: '#/components/schemas/ApplicationCredentialCreatePublicKey'
        - $ref: '#/components/schemas/ApplicationCredentialCreateUrl'
        - $ref: '#/components/schemas/ApplicationCredentialCreatePublic'
      title: Application Credential Create
    ApplicationCredentialCreateResponse:
      description: Response for creating a new application credential
      anyOf:
        - $ref: '#/components/schemas/ApplicationCredentialToken'
        - $ref: '#/components/schemas/ApplicationCredentialPassword'
        - $ref: '#/components/schemas/ApplicationCredentialPublicKey'
        - $ref: '#/components/schemas/ApplicationCredentialUrl'
        - $ref: '#/components/schemas/ApplicationCredentialPublic'
      title: Application Credential Create Response
    TokenCredentialUpdate:
      description: Schema for updating a token credential
      type: object
      properties:
        type:
          type: string
          enum:
            - token
        subject:
          description: 'Subject identifier for the token. Set to null to unset, which allows any token from the provider to be accepted without checking application-specific claims.'
          type: string
          nullable: true
      title: Token Credential Update
    PasswordCredentialUpdate:
      description: Schema for updating a password credential
      type: object
      properties:
        type:
          type: string
          enum:
            - password
      title: Password Credential Update
    PublicKeyCredentialUpdate:
      description: Schema for updating a public key credential
      type: object
      properties:
        type:
          type: string
          enum:
            - public-key
      title: Public Key Credential Update
    UrlCredentialUpdate:
      description: Schema for updating a URL credential
      type: object
      properties:
        type:
          type: string
          enum:
            - url
        identifier:
          description: URL of the credential (must be a valid URL)
          type: string
          format: uri
      title: URL Credential Update
    PublicCredentialUpdate:
      description: Schema for updating a public credential
      type: object
      properties:
        type:
          type: string
          enum:
            - public
        identifier:
          description: 'Identifier for public credential, also used as OAuth 2.0 client ID'
          type: string
      title: Public Credential Update
    ApplicationCredentialUpdate:
      description: Schema for updating an existing application credential
      anyOf:
        - $ref: '#/components/schemas/TokenCredentialUpdate'
        - $ref: '#/components/schemas/PasswordCredentialUpdate'
        - $ref: '#/components/schemas/PublicKeyCredentialUpdate'
        - $ref: '#/components/schemas/UrlCredentialUpdate'
        - $ref: '#/components/schemas/PublicCredentialUpdate'
      title: Application Credential Update
    Zone:
      description: A zone for organizing resources within an organization
      type: object
      properties:
        id:
          description: Unique identifier of the zone
          type: string
        organization_id:
          description: Organization that owns this zone
          type: string
        slug:
          description: 'URL-safe identifier, unique within the zone'
          type: string
          maxLength: 63
          minLength: 1
          pattern: '^[a-z0-9]+(?:-[a-z0-9]+)*$'
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        cname:
          description: Custom domain name (CNAME) for the zone
          type: string
          format: hostname
          maxLength: 255
        user_identity_provider_id:
          description: Provider ID configured for user login
          type: string
        protocols:
          description: Protocol configuration for a zone
          type: object
          properties:
            oauth2:
              $ref: '#/components/schemas/ZoneOAuth2Protocol'
            openid:
              $ref: '#/components/schemas/ZoneOpenIDProtocol'
          required:
            - oauth2
            - openid
        encryption_key:
          $ref: '#/components/schemas/EncryptionKeyAwsKmsConfig'
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - organization_id
        - slug
        - name
        - protocols
        - created_at
        - updated_at
      title: Zone
    ZoneCreate:
      description: Schema for creating a new zone
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        cname:
          description: Custom domain name (CNAME) for the zone
          type: string
          format: hostname
          maxLength: 255
        protocols:
          $ref: '#/components/schemas/ZoneProtocolCreate'
        encryption_key:
          $ref: '#/components/schemas/EncryptionKeyAwsKmsConfig'
      required:
        - name
      title: Zone Create
    ZoneUpdate:
      description: Schema for updating an existing zone (partial update)
      type: object
      properties:
        name:
          description: Human-readable name
          type: string
          maxLength: 255
          minLength: 1
        description:
          description: Human-readable description
          type: string
          maxLength: 2048
          nullable: true
        cname:
          description: Custom domain name (CNAME) for the zone (set to null to remove)
          type: string
          format: hostname
          maxLength: 255
          nullable: true
        user_identity_provider_id:
          description: Provider ID to configure for user login (set to null to unset)
          type: string
          nullable: true
        protocols:
          $ref: '#/components/schemas/ZoneProtocolUpdate'
        encryption_key:
          $ref: '#/components/schemas/EncryptionKeyAwsKmsConfigUpdate'
      title: Zone Update
    Organization:
      description: A Keycard Organization
      type: object
      properties:
        id:
          description: Unique identifier for the Organization
          type: string
          minLength: 1
          maxLength: 255
        name:
          description: Display name for the Organization
          type: string
        label:
          description: A domain name segment for the Organization
          type: string
        created_at:
          description: The time the Organization was created in UTC
          format: date-time
        updated_at:
          description: The time the Organization was most recently updated in UTC
          format: date-time
    OrganizationIdOrLabel:
      type: string
      description: Organization ID or label identifier
      minLength: 1
      maxLength: 255
    SSOConnection:
      description: SSO connection configuration for an organization
      type: object
      properties:
        id:
          description: Unique identifier for the SSO connection
          type: string
        identifier:
          description: SSO provider identifier (e.g., issuer URL)
          type: string
          minLength: 1
          maxLength: 2048
        client_id:
          description: OAuth 2.0 client ID
          type: string
          nullable: true
        client_secret_set:
          description: Whether a client secret is configured
          type: boolean
        created_at:
          description: Entity creation timestamp
          type: string
          format: date-time
        updated_at:
          description: Entity update timestamp
          type: string
          format: date-time
      required:
        - id
        - identifier
        - client_id
        - client_secret_set
        - created_at
        - updated_at
      title: SSO Connection
    SSOConnectionCreate:
      description: Schema for creating an SSO connection
      type: object
      properties:
        identifier:
          description: SSO provider identifier (e.g., issuer URL)
          type: string
          minLength: 1
          maxLength: 2048
        client_id:
          description: OAuth 2.0 client ID
          type: string
        client_secret:
          description: OAuth 2.0 client secret (optional, will be encrypted if provided)
          type: string
      required:
        - identifier
        - client_id
      title: SSO Connection Create
    SSOConnectionUpdate:
      description: Schema for updating an SSO connection
      type: object
      properties:
        identifier:
          description: SSO provider identifier (e.g., issuer URL)
          type: string
          minLength: 1
          maxLength: 2048
        client_id:
          description: OAuth 2.0 client ID (set to null to remove)
          type: string
        client_secret:
          description: OAuth 2.0 client secret (set to null to remove)
          type: string
      title: SSO Connection Update
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT Bearer Token Authentication
